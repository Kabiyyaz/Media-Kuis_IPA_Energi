<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Media Pembelajaran Energi</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            background: linear-gradient(135deg, #e0f2fe 0%, #e8eaf6 100%);
            min-height: 100%;
        }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }
        .card { background: white; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); padding: 1.5rem; margin-bottom: 1.5rem; }
        .btn { padding: 0.75rem 1.5rem; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; transition: all 0.2s; }
        .btn-primary { background: #3b82f6; color: white; }
        .btn-primary:hover { background: #2563eb; }
        .btn-success { background: #10b981; color: white; }
        .btn-success:hover { background: #059669; }
        .btn-gray { background: #6b7280; color: white; }
        
        .nav { background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); padding: 1rem 0; position: sticky; top: 0; z-index: 50; }
        .nav-content { display: flex; justify-content: space-between; align-items: center; }
        .nav-title { font-size: 1.5rem; font-weight: bold; color: #3b82f6; margin: 0; }
        .nav-buttons { display: flex; gap: 1rem; }
        
        .grid { display: grid; gap: 1.5rem; }
        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        
        .text-center { text-align: center; }
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .font-bold { font-weight: bold; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .py-8 { padding: 2rem 0; }
        
        .quiz-option {
            width: 100%;
            padding: 1rem;
            text-align: left;
            background: #f9fafb;
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 0.75rem;
        }
        .quiz-option:hover { background: #f3f4f6; border-color: #3b82f6; }
        
        .correct { background: #10b981 !important; color: white !important; animation: bounce 0.5s; }
        .incorrect { background: #ef4444 !important; color: white !important; animation: shake 0.5s; }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #3b82f6);
            transition: width 0.3s;
            width: 0%;
        }
        
        .hidden { display: none !important; }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-3px); }
            75% { transform: translateX(3px); }
        }
        
        .energy-icon { font-size: 2.5rem; margin-bottom: 1rem; }
        .formula { background: #f0f9ff; padding: 0.75rem; border-radius: 6px; font-family: monospace; }
        
        .energy-card:hover {
            border-color: #3b82f6 !important;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }
        
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-close:hover {
            background: #dc2626;
        }
        
        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .example-item {
            text-align: center;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
        }
        
        .example-svg {
            width: 120px;
            height: 120px;
            margin: 0 auto 1rem;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Navigation -->
  <nav class="nav">
   <div class="container">
    <div class="nav-content">
     <h1 id="main-title" class="nav-title">Media Pembelajaran Energi</h1>
     <div class="nav-buttons"><button id="btn-materi" class="btn btn-primary">ğŸ“š Materi</button> <button id="btn-kuis" class="btn btn-success">ğŸ¯ Kuis</button>
     </div>
    </div>
   </div>
  </nav><!-- Halaman Materi -->
  <div id="page-materi">
   <div class="container py-8">
    <div class="card text-center mb-8">
     <div style="font-size: 4rem; margin-bottom: 1rem;">
      âš¡
     </div>
     <h2 class="text-3xl font-bold mb-4">Apa itu Energi?</h2>
     <p style="font-size: 1.1rem; line-height: 1.6; color: #4b5563;">Energi adalah kekuatan yang membuat sesuatu bisa bergerak atau bekerja. Energi tidak bisa hilang, tapi bisa berubah bentuk. Misalnya energi listrik bisa berubah jadi cahaya lampu!</p>
    </div>
    <div class="grid grid-2">
     <div class="card energy-card" data-energy="panas" style="cursor: pointer; transition: all 0.3s; border: 2px solid transparent;">
      <div class="energy-icon">
       ğŸ”¥
      </div>
      <h3 class="text-xl font-bold mb-4">Energi Panas</h3>
      <p style="color: #6b7280; line-height: 1.6;">Energi yang membuat benda menjadi panas atau hangat. Energi panas bisa kita rasakan dengan kulit kita. Semakin panas suatu benda, semakin besar energi panasnya. Contoh: api kompor untuk memasak, sinar matahari yang hangat, atau gosok-gosok tangan sampai hangat.</p>
      <div class="click-hint" style="text-align: center; margin-top: 1rem; color: #3b82f6; font-size: 0.9rem;">
       ğŸ‘† Klik untuk lihat contoh gambar!
      </div>
     </div>
     <div class="card energy-card" data-energy="cahaya" style="cursor: pointer; transition: all 0.3s; border: 2px solid transparent;">
      <div class="energy-icon">
       ğŸ’¡
      </div>
      <h3 class="text-xl font-bold mb-4">Energi Cahaya</h3>
      <p style="color: #6b7280; line-height: 1.6;">Energi yang bisa kita lihat dengan mata kita. Cahaya membuat kita bisa melihat benda-benda di sekitar. Cahaya bergerak sangat cepat dan bisa menerangi tempat yang gelap. Contoh: sinar matahari yang terang, lampu di rumah, atau senter yang menyinari jalan.</p>
      <div class="click-hint" style="text-align: center; margin-top: 1rem; color: #3b82f6; font-size: 0.9rem;">
       ğŸ‘† Klik untuk lihat contoh gambar!
      </div>
     </div>
     <div class="card energy-card" data-energy="listrik" style="cursor: pointer; transition: all 0.3s; border: 2px solid transparent;">
      <div class="energy-icon">
       âš¡
      </div>
      <h3 class="text-xl font-bold mb-4">Energi Listrik</h3>
      <p style="color: #6b7280; line-height: 1.6;">Energi yang mengalir melalui kabel dan bisa menyalakan berbagai alat. Energi listrik sangat berguna karena bisa berubah jadi cahaya, panas, atau gerakan. Kita pakai energi listrik setiap hari di rumah. Contoh: lampu yang menyala, kipas angin yang berputar, atau TV yang hidup.</p>
      <div class="click-hint" style="text-align: center; margin-top: 1rem; color: #3b82f6; font-size: 0.9rem;">
       ğŸ‘† Klik untuk lihat contoh gambar!
      </div>
     </div>
     <div class="card energy-card" data-energy="gerak" style="cursor: pointer; transition: all 0.3s; border: 2px solid transparent;">
      <div class="energy-icon">
       ğŸƒâ€â™‚ï¸
      </div>
      <h3 class="text-xl font-bold mb-4">Energi Gerak</h3>
      <p style="color: #6b7280; line-height: 1.6;">Energi yang ada pada benda yang sedang bergerak. Semakin cepat bergerak, semakin besar energinya. Benda yang berat dan bergerak cepat punya energi gerak yang sangat besar. Contoh: kamu yang berlari, sepeda yang melaju, atau bola yang ditendang.</p>
      <div class="click-hint" style="text-align: center; margin-top: 1rem; color: #3b82f6; font-size: 0.9rem;">
       ğŸ‘† Klik untuk lihat contoh gambar!
      </div>
     </div>
     <div class="card energy-card" data-energy="kimia" style="cursor: pointer; transition: all 0.3s; border: 2px solid transparent;">
      <div class="energy-icon">
       ğŸ§ª
      </div>
      <h3 class="text-xl font-bold mb-4">Energi Kimia</h3>
      <p style="color: #6b7280; line-height: 1.6;">Energi yang tersimpan dalam makanan, baterai, dan bahan bakar. Energi kimia bisa berubah jadi energi lain saat digunakan. Tubuh kita menggunakan energi kimia dari makanan untuk bergerak dan berpikir. Contoh: makanan yang kita makan, baterai mainan, atau bensin untuk kendaraan.</p>
      <div class="click-hint" style="text-align: center; margin-top: 1rem; color: #3b82f6; font-size: 0.9rem;">
       ğŸ‘† Klik untuk lihat contoh gambar!
      </div>
     </div>
     <div class="card energy-card" data-energy="bunyi" style="cursor: pointer; transition: all 0.3s; border: 2px solid transparent;">
      <div class="energy-icon">
       ğŸ”Š
      </div>
      <h3 class="text-xl font-bold mb-4">Energi Bunyi</h3>
      <p style="color: #6b7280; line-height: 1.6;">Energi yang bisa kita dengar dengan telinga kita. Bunyi terjadi karena ada getaran yang merambat melalui udara. Bunyi tidak bisa merambat di tempat yang tidak ada udara. Contoh: suara musik yang merdu, suara petir yang menggelegar, atau suara kita saat berbicara.</p>
      <div class="click-hint" style="text-align: center; margin-top: 1rem; color: #3b82f6; font-size: 0.9rem;">
       ğŸ‘† Klik untuk lihat contoh gambar!
      </div>
     </div>
    </div>
    <div class="card text-center" style="background: linear-gradient(135deg, #8b5cf6, #ec4899); color: white;">
     <h3 class="text-2xl font-bold mb-4">ğŸ”„ Aturan Penting Energi</h3>
     <p style="font-size: 1.1rem;">"Energi tidak bisa hilang atau dibuat dari tidak ada. Energi hanya bisa berubah bentuk!"</p>
     <p style="font-size: 0.9rem; margin-top: 0.5rem;">Contoh: Energi listrik berubah jadi cahaya lampu dan panas</p>
    </div>
    <div class="card">
     <h3 class="text-xl font-bold mb-4">ğŸ“š Sumber Referensi</h3>
     <div style="line-height: 1.8; color: #6b7280;">
      â€¢ <a href="https://www.britannica.com/science/energy" target="_blank" rel="noopener noreferrer" style="color: #3b82f6;">Encyclopedia Britannica - Energy</a><br>
       â€¢ <a href="https://www.khanacademy.org/science/physics/work-and-energy" target="_blank" rel="noopener noreferrer" style="color: #3b82f6;">Khan Academy - Work and Energy</a><br>
       â€¢ <a href="https://www.nasa.gov/audience/forstudents/k-4/stories/nasa-knows/what-is-energy-k4.html" target="_blank" rel="noopener noreferrer" style="color: #3b82f6;">NASA - What is Energy?</a><br>
       â€¢ Halliday, D., Resnick, R., &amp; Walker, J. (2013). Fundamentals of Physics. Wiley.
     </div>
    </div>
   </div>
  </div><!-- Halaman Kuis -->
  <div id="page-kuis" class="hidden"><!-- Input Nama Siswa -->
   <div id="name-input-section" class="container py-8">
    <div class="text-center mb-8">
     <div style="font-size: 4rem; margin-bottom: 1rem;">
      ğŸ‘‹
     </div>
     <h2 class="text-3xl font-bold mb-4">Selamat Datang!</h2>
     <p style="color: #6b7280;">Masukkan nama Anda sebelum memulai kuis</p>
    </div>
    <div class="card text-center" style="max-width: 500px; margin: 0 auto;">
     <div style="font-size: 2rem; margin-bottom: 1rem;">
      ğŸ“
     </div>
     <h3 class="text-xl font-bold mb-4">Identitas Siswa</h3>
     <div class="mb-4"><label for="student-name" class="block text-left font-semibold mb-2" style="color: #374151;">Nama Lengkap:</label> <input type="text" id="student-name" class="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="Masukkan nama lengkap Anda..." maxlength="50">
     </div><button id="start-quiz-btn" class="btn btn-success" style="width: 100%; padding: 1rem;"> ğŸš€ Mulai Kuis </button>
    </div>
   </div><!-- Kuis Section -->
   <div id="quiz-section" class="hidden">
    <div class="container py-8">
     <div class="text-center mb-8">
      <div style="font-size: 4rem; margin-bottom: 1rem;">
       ğŸ¯
      </div>
      <h2 id="quiz-title" class="text-3xl font-bold mb-4">Kuis Interaktif Energi</h2>
      <p style="color: #6b7280;">Uji pemahaman Anda tentang energi!</p>
      <div id="student-info" class="mt-4 p-3 bg-blue-50 rounded-lg inline-block"><span style="color: #1e40af; font-weight: 600;">ğŸ‘¤ Nama: <span id="display-name"></span></span>
      </div>
     </div>
     <div class="card mb-6">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;"><span style="font-weight: 600; color: #6b7280;">Progress</span> <span id="progress-text" style="font-weight: 600; color: #6b7280;">0/5</span>
      </div>
      <div class="progress-bar">
       <div id="progress-bar" class="progress-fill"></div>
      </div>
     </div>
     <div id="quiz-container" class="card">
      <div id="question-container">
       <h3 id="question-text" class="text-xl font-bold mb-6"></h3>
       <div id="options-container"></div>
      </div>
      <div id="result-container" class="hidden text-center">
       <div id="result-icon" style="font-size: 4rem; margin-bottom: 1rem;"></div>
       <h3 id="result-text" class="text-2xl font-bold mb-4"></h3>
       <p id="result-explanation" style="color: #6b7280; margin-bottom: 1.5rem;"></p><button id="next-btn" class="btn btn-primary">Soal Berikutnya</button>
      </div>
     </div>
     <div id="final-score" class="hidden card text-center">
      <div style="font-size: 4rem; margin-bottom: 1rem;">
       ğŸ†
      </div>
      <h3 class="text-2xl font-bold mb-4">Selamat!</h3>
      <div id="congratulations-message" class="mb-4">
       <p class="text-xl font-semibold" style="color: #059669;">ğŸ‰ <span id="final-student-name"></span></p>
       <p style="color: #6b7280; margin-top: 0.5rem;">Anda telah menyelesaikan kuis dengan baik!</p>
      </div>
      <p id="score-text" class="text-xl mb-6" style="color: #6b7280;"></p><!-- Opsi Simpan Hasil -->
      <div class="mb-6">
       <h4 class="font-bold mb-3" style="color: #374151;">ğŸ’¾ Simpan Hasil Kuis:</h4>
       <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;"><button id="save-image-btn" class="btn btn-primary" style="display: flex; align-items: center; gap: 0.5rem;"> ğŸ–¼ï¸ Simpan sebagai Gambar </button> <button id="save-pdf-btn" class="btn btn-primary" style="display: flex; align-items: center; gap: 0.5rem;"> ğŸ“„ Simpan sebagai PDF </button>
       </div>
      </div><button id="restart-btn" class="btn btn-success">ğŸ”„ Ulangi Kuis</button>
     </div>
    </div>
   </div>
  </div><!-- Modal untuk Contoh Gambar -->
  <div id="image-modal" class="modal hidden">
   <div class="modal-content"><button class="modal-close" onclick="closeModal()">Ã—</button>
    <h2 id="modal-title" class="text-2xl font-bold mb-4 text-center"></h2>
    <div id="modal-examples" class="example-grid"></div>
   </div>
  </div><!-- Template Sertifikat (Hidden) -->
  <div id="certificate-template" style="display: none; width: 800px; height: 600px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; box-sizing: border-box; font-family: 'Arial', sans-serif; position: relative;">
   <div style="background: rgba(255,255,255,0.1); border-radius: 20px; padding: 40px; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; border: 3px solid rgba(255,255,255,0.3);">
    <div style="font-size: 3rem; margin-bottom: 20px;">
     ğŸ†
    </div>
    <h1 style="font-size: 2.5rem; margin-bottom: 10px; font-weight: bold;">SERTIFIKAT</h1>
    <h2 style="font-size: 1.8rem; margin-bottom: 30px; font-weight: normal;">Kuis Interaktif Energi</h2>
    <div style="margin-bottom: 30px;">
     <p style="font-size: 1.2rem; margin-bottom: 10px;">Diberikan kepada:</p>
     <h3 id="cert-student-name" style="font-size: 2rem; font-weight: bold; color: #FFD700; margin-bottom: 20px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);"></h3>
    </div>
    <div style="margin-bottom: 30px;">
     <p style="font-size: 1.1rem; margin-bottom: 10px;">Telah menyelesaikan kuis dengan skor:</p>
     <div id="cert-score" style="font-size: 2.5rem; font-weight: bold; color: #FFD700; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);"></div>
    </div>
    <div style="margin-bottom: 20px;">
     <p id="cert-date" style="font-size: 1rem; opacity: 0.9;"></p>
    </div>
    <div style="display: flex; justify-content: space-between; width: 100%; margin-top: 40px;">
     <div style="text-align: center;">
      <div style="border-top: 2px solid rgba(255,255,255,0.5); width: 150px; margin-bottom: 5px;"></div>
      <p style="font-size: 0.9rem; opacity: 0.8;">Media Pembelajaran</p>
     </div>
     <div style="text-align: center;">
      <div style="border-top: 2px solid rgba(255,255,255,0.5); width: 150px; margin-bottom: 5px;"></div>
      <p style="font-size: 0.9rem; opacity: 0.8;">Energi</p>
     </div>
    </div><!-- Decorative elements -->
    <div style="position: absolute; top: 20px; left: 20px; font-size: 2rem; opacity: 0.3;">
     âš¡
    </div>
    <div style="position: absolute; top: 20px; right: 20px; font-size: 2rem; opacity: 0.3;">
     ğŸ’¡
    </div>
    <div style="position: absolute; bottom: 20px; left: 20px; font-size: 2rem; opacity: 0.3;">
     ğŸ”¥
    </div>
    <div style="position: absolute; bottom: 20px; right: 20px; font-size: 2rem; opacity: 0.3;">
     ğŸƒâ€â™‚ï¸
    </div>
   </div>
  </div>
  <script>
        // Configuration
        const defaultConfig = {
            main_title: "Media Pembelajaran Energi",
            quiz_title: "Kuis Interaktif Energi"
        };

        // Data contoh gambar untuk setiap jenis energi
        const energyExamples = {
            panas: {
                title: "Contoh Energi Panas",
                examples: [
                    {
                        name: "Api Kompor",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <rect x="50" y="150" width="100" height="30" fill="#666" rx="5"/>
                            <circle cx="70" cy="140" r="8" fill="#ff4444"/>
                            <circle cx="100" cy="140" r="8" fill="#ff6644"/>
                            <circle cx="130" cy="140" r="8" fill="#ff4444"/>
                            <path d="M70 132 Q75 120 70 110 Q65 120 70 132" fill="#ff8844"/>
                            <path d="M100 132 Q105 115 100 105 Q95 115 100 132" fill="#ffaa44"/>
                            <path d="M130 132 Q135 120 130 110 Q125 120 130 132" fill="#ff8844"/>
                        </svg>`
                    },
                    {
                        name: "Sinar Matahari",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <circle cx="100" cy="100" r="30" fill="#ffdd44"/>
                            <g stroke="#ffdd44" stroke-width="3">
                                <line x1="100" y1="40" x2="100" y2="20"/>
                                <line x1="100" y1="160" x2="100" y2="180"/>
                                <line x1="40" y1="100" x2="20" y2="100"/>
                                <line x1="160" y1="100" x2="180" y2="100"/>
                                <line x1="65" y1="65" x2="50" y2="50"/>
                                <line x1="135" y1="135" x2="150" y2="150"/>
                                <line x1="135" y1="65" x2="150" y2="50"/>
                                <line x1="65" y1="135" x2="50" y2="150"/>
                            </g>
                        </svg>`
                    },
                    {
                        name: "Gosok Tangan",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <path d="M60 80 Q80 70 100 80 Q120 90 140 80 Q130 100 120 120 Q100 130 80 120 Q70 100 60 80" fill="#ffcc99"/>
                            <path d="M60 120 Q80 110 100 120 Q120 130 140 120 Q130 140 120 160 Q100 170 80 160 Q70 140 60 120" fill="#ffcc99"/>
                            <circle cx="90" cy="90" r="3" fill="#ff6666" opacity="0.7"/>
                            <circle cx="110" cy="110" r="3" fill="#ff6666" opacity="0.7"/>
                            <circle cx="85" cy="130" r="3" fill="#ff6666" opacity="0.7"/>
                            <circle cx="115" cy="140" r="3" fill="#ff6666" opacity="0.7"/>
                        </svg>`
                    }
                ]
            },
            cahaya: {
                title: "Contoh Energi Cahaya",
                examples: [
                    {
                        name: "Lampu Rumah",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <circle cx="100" cy="80" r="25" fill="#ffff88"/>
                            <rect x="95" y="105" width="10" height="20" fill="#666"/>
                            <rect x="85" y="125" width="30" height="15" fill="#888" rx="3"/>
                            <g stroke="#ffff88" stroke-width="2" opacity="0.6">
                                <line x1="100" y1="40" x2="100" y2="25"/>
                                <line x1="100" y1="120" x2="100" y2="135"/>
                                <line x1="60" y1="80" x2="45" y2="80"/>
                                <line x1="140" y1="80" x2="155" y2="80"/>
                                <line x1="71" y1="51" x2="61" y2="41"/>
                                <line x1="129" y1="109" x2="139" y2="119"/>
                                <line x1="129" y1="51" x2="139" y2="41"/>
                                <line x1="71" y1="109" x2="61" y2="119"/>
                            </g>
                        </svg>`
                    },
                    {
                        name: "Senter",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <rect x="70" y="90" width="60" height="20" fill="#333" rx="10"/>
                            <circle cx="140" cy="100" r="15" fill="#666"/>
                            <circle cx="140" cy="100" r="10" fill="#ffff88"/>
                            <path d="M155 100 L180 85 L180 115 Z" fill="#ffff88" opacity="0.7"/>
                            <rect x="60" y="95" width="15" height="10" fill="#666" rx="2"/>
                        </svg>`
                    },
                    {
                        name: "Lilin",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <rect x="90" y="120" width="20" height="60" fill="#ffeeaa" rx="3"/>
                            <ellipse cx="100" cy="115" rx="8" ry="3" fill="#ffaa44"/>
                            <path d="M100 115 Q105 105 100 95 Q95 105 100 115" fill="#ff6644"/>
                            <circle cx="100" cy="110" r="2" fill="#ffff88"/>
                            <g stroke="#ffff88" stroke-width="1" opacity="0.5">
                                <circle cx="100" cy="110" r="15"/>
                                <circle cx="100" cy="110" r="25"/>
                            </g>
                        </svg>`
                    }
                ]
            },
            listrik: {
                title: "Contoh Energi Listrik",
                examples: [
                    {
                        name: "Kipas Angin",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <circle cx="100" cy="100" r="8" fill="#333"/>
                            <path d="M100 92 Q120 80 130 100 Q120 120 100 108 Q80 120 70 100 Q80 80 100 92" fill="#4444ff"/>
                            <path d="M108 100 Q120 120 100 130 Q80 120 92 100 Q80 80 100 70 Q120 80 108 100" fill="#4444ff"/>
                            <rect x="95" y="108" width="10" height="40" fill="#666"/>
                            <rect x="85" y="148" width="30" height="8" fill="#888" rx="4"/>
                            <line x1="100" y1="20" x2="100" y2="40" stroke="#ffdd44" stroke-width="2"/>
                        </svg>`
                    },
                    {
                        name: "TV",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <rect x="40" y="60" width="120" height="80" fill="#333" rx="8"/>
                            <rect x="50" y="70" width="100" height="60" fill="#4488ff" rx="4"/>
                            <rect x="90" y="140" width="20" height="15" fill="#666"/>
                            <rect x="70" y="155" width="60" height="8" fill="#888" rx="4"/>
                            <circle cx="170" cy="70" r="3" fill="#ff4444"/>
                            <rect x="60" y="80" width="30" height="20" fill="#88ff88"/>
                            <rect x="110" y="80" width="30" height="20" fill="#ff8888"/>
                            <rect x="60" y="110" width="30" height="20" fill="#ffff88"/>
                            <rect x="110" y="110" width="30" height="20" fill="#ff88ff"/>
                        </svg>`
                    },
                    {
                        name: "Charger HP",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <rect x="70" y="80" width="60" height="100" fill="#333" rx="8"/>
                            <rect x="75" y="85" width="50" height="70" fill="#4488ff" rx="4"/>
                            <circle cx="100" cy="170" r="8" fill="#666"/>
                            <rect x="95" y="180" width="10" height="15" fill="#666"/>
                            <path d="M95 195 Q100 200 105 195 L110 200 L90 200 Z" fill="#666"/>
                            <path d="M90 100 L95 90 L105 90 L110 100 L105 110 L95 110 Z" fill="#ffff44"/>
                            <line x1="100" y1="90" x2="100" y2="110" stroke="#333" stroke-width="2"/>
                        </svg>`
                    }
                ]
            },
            gerak: {
                title: "Contoh Energi Gerak",
                examples: [
                    {
                        name: "Anak Berlari",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <circle cx="80" cy="60" r="15" fill="#ffcc99"/>
                            <rect x="75" y="75" width="10" height="30" fill="#4488ff"/>
                            <rect x="70" y="105" width="8" height="25" fill="#333"/>
                            <rect x="82" y="105" width="8" height="25" fill="#333"/>
                            <path d="M85 80 L95 90 L90 100 L80 90" fill="#ffcc99"/>
                            <path d="M75 85 L65 95 L70 105 L80 95" fill="#ffcc99"/>
                            <g stroke="#888" stroke-width="2" opacity="0.5">
                                <path d="M95 120 Q105 115 115 120"/>
                                <path d="M110 130 Q120 125 130 130"/>
                                <path d="M125 140 Q135 135 145 140"/>
                            </g>
                        </svg>`
                    },
                    {
                        name: "Sepeda",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <circle cx="60" cy="140" r="25" fill="none" stroke="#333" stroke-width="4"/>
                            <circle cx="140" cy="140" r="25" fill="none" stroke="#333" stroke-width="4"/>
                            <line x1="60" y1="140" x2="100" y2="100" stroke="#666" stroke-width="3"/>
                            <line x1="100" y1="100" x2="140" y2="140" stroke="#666" stroke-width="3"/>
                            <line x1="100" y1="100" x2="100" y2="80" stroke="#666" stroke-width="3"/>
                            <rect x="95" y="75" width="10" height="10" fill="#333"/>
                            <g stroke="#888" stroke-width="2" opacity="0.5">
                                <path d="M165 140 Q175 135 185 140"/>
                                <path d="M170 150 Q180 145 190 150"/>
                            </g>
                        </svg>`
                    },
                    {
                        name: "Bola Ditendang",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <circle cx="120" cy="80" r="20" fill="#ff8844"/>
                            <path d="M120 65 L125 70 L130 65 L130 75 L125 80 L120 75 Z" fill="#333"/>
                            <path d="M110 80 L115 85 L110 90 L105 85 Z" fill="#333"/>
                            <path d="M130 85 L135 90 L130 95 L125 90 Z" fill="#333"/>
                            <ellipse cx="60" cy="160" rx="15" ry="8" fill="#ffcc99"/>
                            <rect x="50" y="140" width="8" height="25" fill="#333"/>
                            <rect x="62" y="140" width="8" height="25" fill="#333"/>
                            <g stroke="#888" stroke-width="2" opacity="0.5">
                                <path d="M140 70 Q150 65 160 70"/>
                                <path d="M145 80 Q155 75 165 80"/>
                                <path d="M150 90 Q160 85 170 90"/>
                            </g>
                        </svg>`
                    }
                ]
            },
            kimia: {
                title: "Contoh Energi Kimia",
                examples: [
                    {
                        name: "Makanan",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <ellipse cx="100" cy="140" rx="40" ry="15" fill="#8B4513"/>
                            <ellipse cx="100" cy="135" rx="40" ry="15" fill="#DEB887"/>
                            <rect x="80" y="120" width="40" height="20" fill="#FF6347" rx="10"/>
                            <rect x="85" y="110" width="30" height="15" fill="#32CD32" rx="7"/>
                            <rect x="90" y="100" width="20" height="15" fill="#FFD700" rx="7"/>
                            <path d="M70 100 Q100 80 130 100" fill="none" stroke="#888" stroke-width="2"/>
                            <circle cx="85" cy="95" r="2" fill="#888"/>
                            <circle cx="100" cy="90" r="2" fill="#888"/>
                            <circle cx="115" cy="95" r="2" fill="#888"/>
                        </svg>`
                    },
                    {
                        name: "Baterai",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <rect x="70" y="80" width="60" height="80" fill="#333" rx="8"/>
                            <rect x="90" y="70" width="20" height="10" fill="#666" rx="2"/>
                            <rect x="75" y="90" width="50" height="15" fill="#ff4444"/>
                            <rect x="75" y="110" width="50" height="15" fill="#ffff44"/>
                            <text x="100" y="140" text-anchor="middle" fill="white" font-size="12" font-weight="bold">AA</text>
                            <circle cx="85" cy="150" r="3" fill="#ffff44"/>
                            <circle cx="115" cy="150" r="3" fill="#ffff44"/>
                            <text x="85" y="155" text-anchor="middle" fill="white" font-size="8">+</text>
                            <text x="115" y="155" text-anchor="middle" fill="white" font-size="8">-</text>
                        </svg>`
                    },
                    {
                        name: "Bensin",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <rect x="60" y="100" width="80" height="60" fill="#4444ff" rx="8"/>
                            <rect x="65" y="105" width="70" height="50" fill="#6666ff" rx="4"/>
                            <circle cx="100" cy="130" r="15" fill="#ffff44"/>
                            <rect x="95" y="80" width="10" height="25" fill="#333"/>
                            <circle cx="100" cy="75" r="5" fill="#666"/>
                            <path d="M85 130 Q100 120 115 130" fill="none" stroke="#ffff44" stroke-width="2"/>
                            <text x="100" y="150" text-anchor="middle" fill="white" font-size="10" font-weight="bold">FUEL</text>
                            <g stroke="#ffff44" stroke-width="1" opacity="0.6">
                                <circle cx="100" cy="130" r="20"/>
                                <circle cx="100" cy="130" r="25"/>
                            </g>
                        </svg>`
                    }
                ]
            },
            bunyi: {
                title: "Contoh Energi Bunyi",
                examples: [
                    {
                        name: "Speaker Musik",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <rect x="60" y="60" width="80" height="80" fill="#333" rx="8"/>
                            <circle cx="100" cy="100" r="25" fill="#666"/>
                            <circle cx="100" cy="100" r="15" fill="#333"/>
                            <circle cx="100" cy="100" r="8" fill="#ffff44"/>
                            <g stroke="#44ff44" stroke-width="2" opacity="0.7">
                                <path d="M145 100 Q155 90 165 100 Q155 110 145 100"/>
                                <path d="M150 100 Q165 85 180 100 Q165 115 150 100"/>
                                <path d="M155 100 Q175 80 195 100 Q175 120 155 100"/>
                            </g>
                            <circle cx="100" cy="80" r="4" fill="#ff4444"/>
                            <circle cx="100" cy="120" r="4" fill="#4444ff"/>
                        </svg>`
                    },
                    {
                        name: "Petir",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <ellipse cx="80" cy="50" rx="30" ry="20" fill="#666"/>
                            <ellipse cx="120" cy="60" rx="35" ry="25" fill="#888"/>
                            <ellipse cx="100" cy="40" rx="25" ry="15" fill="#555"/>
                            <path d="M100 80 L95 100 L105 100 L100 120 L95 140 L105 140 L100 160" 
                                  fill="none" stroke="#ffff44" stroke-width="4"/>
                            <path d="M100 80 L95 100 L105 100 L100 120 L95 140 L105 140 L100 160" 
                                  fill="none" stroke="#ffffff" stroke-width="2"/>
                            <g stroke="#ffff44" stroke-width="2" opacity="0.6">
                                <circle cx="100" cy="120" r="30"/>
                                <circle cx="100" cy="120" r="45"/>
                                <circle cx="100" cy="120" r="60"/>
                            </g>
                        </svg>`
                    },
                    {
                        name: "Orang Bicara",
                        svg: `<svg viewBox="0 0 200 200" class="example-svg">
                            <circle cx="80" cy="80" r="20" fill="#ffcc99"/>
                            <path d="M75 90 Q80 95 85 90" fill="#ff8888"/>
                            <circle cx="75" cy="75" r="2" fill="#333"/>
                            <circle cx="85" cy="75" r="2" fill="#333"/>
                            <rect x="75" y="100" width="10" height="40" fill="#4488ff"/>
                            <path d="M85 105 L95 110 L90 125 L80 120" fill="#ffcc99"/>
                            <g stroke="#44ff44" stroke-width="2" opacity="0.7">
                                <path d="M105 80 Q115 70 125 80 Q115 90 105 80"/>
                                <path d="M110 80 Q125 65 140 80 Q125 95 110 80"/>
                                <path d="M115 80 Q135 60 155 80 Q135 100 115 80"/>
                            </g>
                        </svg>`
                    }
                ]
            }
        };

        // Quiz Data
        const quizData = [
            {
                question: "Apa itu energi?",
                options: [
                    "Makanan yang kita makan",
                    "Kekuatan yang membuat sesuatu bisa bergerak atau bekerja",
                    "Alat untuk bermain",
                    "Benda yang bisa kita pegang"
                ],
                correct: 1,
                explanation: "Energi adalah kekuatan yang membuat sesuatu bisa bergerak atau bekerja, seperti energi listrik yang menyalakan lampu."
            },
            {
                question: "Ketika kamu berlari, kamu memiliki energi apa?",
                options: [
                    "Energi panas",
                    "Energi gerak",
                    "Energi cahaya",
                    "Energi bunyi"
                ],
                correct: 1,
                explanation: "Saat berlari, kamu memiliki energi gerak karena tubuhmu sedang bergerak."
            },
            {
                question: "Energi yang tersimpan dalam makanan dan baterai disebut:",
                options: [
                    "Energi gerak",
                    "Energi listrik",
                    "Energi kimia",
                    "Energi bunyi"
                ],
                correct: 2,
                explanation: "Energi kimia tersimpan dalam makanan dan baterai. Tubuh kita menggunakan energi kimia dari makanan untuk bergerak dan berpikir."
            },
            {
                question: "Apa yang terjadi dengan energi?",
                options: [
                    "Energi bisa hilang begitu saja",
                    "Energi bisa dibuat dari tidak ada",
                    "Energi hanya bisa berubah bentuk",
                    "Energi selalu sama bentuknya"
                ],
                correct: 2,
                explanation: "Energi tidak bisa hilang atau dibuat dari tidak ada. Energi hanya bisa berubah bentuk, seperti energi listrik berubah jadi cahaya lampu."
            },
            {
                question: "Contoh perubahan energi yang benar adalah:",
                options: [
                    "Energi kimia makanan berubah jadi energi gerak saat berlari",
                    "Energi bunyi berubah jadi makanan",
                    "Energi panas berubah jadi batu",
                    "Energi cahaya berubah jadi air"
                ],
                correct: 0,
                explanation: "Energi kimia dari makanan berubah jadi energi gerak saat kita berlari. Ini contoh perubahan energi yang terjadi di tubuh kita."
            }
        ];

        // Quiz State
        let currentQuestion = 0;
        let score = 0;
        let answered = false;
        let studentName = '';

        // Audio Context for sound effects
        let audioContext;
        
        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playCorrectSound() {
            initAudio();
            
            // Suara "Ding Ding" untuk jawaban benar - nada naik ceria
            const times = [0, 0.15, 0.3];
            const frequencies = [523.25, 659.25, 783.99]; // C5, E5, G5 - chord mayor yang ceria
            
            times.forEach((time, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.type = 'sine'; // Suara lembut dan menyenangkan
                oscillator.frequency.setValueAtTime(frequencies[index], audioContext.currentTime + time);
                
                gainNode.gain.setValueAtTime(0, audioContext.currentTime + time);
                gainNode.gain.linearRampToValueAtTime(0.4, audioContext.currentTime + time + 0.05);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + time + 0.4);
                
                oscillator.start(audioContext.currentTime + time);
                oscillator.stop(audioContext.currentTime + time + 0.4);
            });
            
            // Tambahan efek "sparkle" untuk jawaban benar
            setTimeout(() => {
                const sparkleOsc = audioContext.createOscillator();
                const sparkleGain = audioContext.createGain();
                
                sparkleOsc.connect(sparkleGain);
                sparkleGain.connect(audioContext.destination);
                
                sparkleOsc.type = 'triangle';
                sparkleOsc.frequency.setValueAtTime(1046.5, audioContext.currentTime); // C6 - nada tinggi
                sparkleOsc.frequency.exponentialRampToValueAtTime(2093, audioContext.currentTime + 0.2); // C7
                
                sparkleGain.gain.setValueAtTime(0.2, audioContext.currentTime);
                sparkleGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                sparkleOsc.start(audioContext.currentTime);
                sparkleOsc.stop(audioContext.currentTime + 0.3);
            }, 200);
        }

        function playIncorrectSound() {
            initAudio();
            
            // Suara "Buzz" untuk jawaban salah - nada turun
            const oscillator1 = audioContext.createOscillator();
            const oscillator2 = audioContext.createOscillator();
            const gainNode1 = audioContext.createGain();
            const gainNode2 = audioContext.createGain();
            
            oscillator1.connect(gainNode1);
            oscillator2.connect(gainNode2);
            gainNode1.connect(audioContext.destination);
            gainNode2.connect(audioContext.destination);
            
            // Dua nada yang tidak harmonis untuk efek "salah"
            oscillator1.type = 'sawtooth'; // Suara lebih kasar
            oscillator2.type = 'sawtooth';
            
            oscillator1.frequency.setValueAtTime(220, audioContext.currentTime); // A3
            oscillator2.frequency.setValueAtTime(233.08, audioContext.currentTime); // A#3 - sedikit tidak harmonis
            
            // Nada turun untuk menunjukkan kesalahan
            oscillator1.frequency.exponentialRampToValueAtTime(110, audioContext.currentTime + 0.5); // A2
            oscillator2.frequency.exponentialRampToValueAtTime(116.54, audioContext.currentTime + 0.5); // A#2
            
            gainNode1.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode2.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode1.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.6);
            gainNode2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.6);
            
            oscillator1.start(audioContext.currentTime);
            oscillator2.start(audioContext.currentTime);
            oscillator1.stop(audioContext.currentTime + 0.6);
            oscillator2.stop(audioContext.currentTime + 0.6);
        }

        function playQuizStartSound() {
            initAudio();
            
            // Suara "Ta-da!" untuk memulai kuis
            const frequencies = [261.63, 329.63, 392, 523.25]; // C4, E4, G4, C5
            
            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.type = 'triangle';
                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime + index * 0.1);
                
                gainNode.gain.setValueAtTime(0, audioContext.currentTime + index * 0.1);
                gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + index * 0.1 + 0.05);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + index * 0.1 + 0.3);
                
                oscillator.start(audioContext.currentTime + index * 0.1);
                oscillator.stop(audioContext.currentTime + index * 0.1 + 0.3);
            });
        }

        function playCompletionSound() {
            initAudio();
            
            // Suara fanfare untuk menyelesaikan kuis
            const melody = [
                {freq: 523.25, time: 0},     // C5
                {freq: 659.25, time: 0.2},   // E5
                {freq: 783.99, time: 0.4},   // G5
                {freq: 1046.5, time: 0.6},   // C6
                {freq: 783.99, time: 0.8},   // G5
                {freq: 1046.5, time: 1.0}    // C6
            ];
            
            melody.forEach(note => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.type = 'triangle';
                oscillator.frequency.setValueAtTime(note.freq, audioContext.currentTime + note.time);
                
                gainNode.gain.setValueAtTime(0, audioContext.currentTime + note.time);
                gainNode.gain.linearRampToValueAtTime(0.4, audioContext.currentTime + note.time + 0.05);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + note.time + 0.4);
                
                oscillator.start(audioContext.currentTime + note.time);
                oscillator.stop(audioContext.currentTime + note.time + 0.4);
            });
        }

        // Navigation
        document.getElementById('btn-materi').addEventListener('click', () => {
            document.getElementById('page-materi').classList.remove('hidden');
            document.getElementById('page-kuis').classList.add('hidden');
            document.getElementById('btn-materi').className = 'btn btn-primary';
            document.getElementById('btn-kuis').className = 'btn btn-gray';
        });

        document.getElementById('btn-kuis').addEventListener('click', () => {
            document.getElementById('page-materi').classList.add('hidden');
            document.getElementById('page-kuis').classList.remove('hidden');
            document.getElementById('btn-kuis').className = 'btn btn-success';
            document.getElementById('btn-materi').className = 'btn btn-gray';
            showNameInput();
        });

        // Name Input Functions
        function showNameInput() {
            document.getElementById('name-input-section').classList.remove('hidden');
            document.getElementById('quiz-section').classList.add('hidden');
            document.getElementById('student-name').value = '';
            document.getElementById('student-name').focus();
        }

        function startQuizWithName() {
            const nameInput = document.getElementById('student-name');
            const name = nameInput.value.trim();
            
            if (name === '') {
                nameInput.style.borderColor = '#ef4444';
                nameInput.placeholder = 'Nama tidak boleh kosong!';
                nameInput.focus();
                return;
            }
            
            if (name.length < 2) {
                nameInput.style.borderColor = '#ef4444';
                nameInput.placeholder = 'Nama terlalu pendek!';
                nameInput.focus();
                return;
            }
            
            studentName = name;
            document.getElementById('display-name').textContent = studentName;
            document.getElementById('name-input-section').classList.add('hidden');
            document.getElementById('quiz-section').classList.remove('hidden');
            
            resetQuiz();
            playQuizStartSound();
        }

        // Quiz Functions
        function displayQuestion() {
            const question = quizData[currentQuestion];
            document.getElementById('question-text').textContent = `${currentQuestion + 1}. ${question.question}`;
            
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'quiz-option w-full p-4 text-left bg-gray-50 hover:bg-gray-100 rounded-lg border-2 border-transparent hover:border-blue-300 transition-all';
                button.textContent = option;
                button.addEventListener('click', () => selectAnswer(index));
                optionsContainer.appendChild(button);
            });
            
            updateProgress();
        }

        function selectAnswer(selectedIndex) {
            if (answered) return;
            
            answered = true;
            const question = quizData[currentQuestion];
            const options = document.querySelectorAll('.quiz-option');
            
            options.forEach((option, index) => {
                if (index === question.correct) {
                    option.classList.add('correct', 'bounce');
                } else if (index === selectedIndex && index !== question.correct) {
                    option.classList.add('incorrect', 'shake');
                }
                option.style.pointerEvents = 'none';
            });
            
            if (selectedIndex === question.correct) {
                score++;
                playCorrectSound();
                showResult(true, question.explanation);
            } else {
                playIncorrectSound();
                showResult(false, question.explanation);
            }
        }

        function showResult(isCorrect, explanation) {
            setTimeout(() => {
                document.getElementById('question-container').classList.add('hidden');
                document.getElementById('result-container').classList.remove('hidden');
                
                const resultIcon = document.getElementById('result-icon');
                const resultText = document.getElementById('result-text');
                
                if (isCorrect) {
                    resultIcon.textContent = 'ğŸ‰';
                    resultText.textContent = 'Benar!';
                    resultText.className = 'text-2xl font-bold mb-4 text-green-600';
                } else {
                    resultIcon.textContent = 'ğŸ˜”';
                    resultText.textContent = 'Salah!';
                    resultText.className = 'text-2xl font-bold mb-4 text-red-600';
                }
                
                document.getElementById('result-explanation').textContent = explanation;
                
                if (currentQuestion === quizData.length - 1) {
                    document.getElementById('next-btn').textContent = 'Lihat Hasil';
                }
            }, 1000);
        }

        function nextQuestion() {
            currentQuestion++;
            answered = false;
            
            if (currentQuestion >= quizData.length) {
                showFinalScore();
            } else {
                document.getElementById('question-container').classList.remove('hidden');
                document.getElementById('result-container').classList.add('hidden');
                displayQuestion();
            }
        }

        function showFinalScore() {
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('final-score').classList.remove('hidden');
            
            const percentage = Math.round((score / quizData.length) * 100);
            let message = '';
            
            if (percentage >= 80) {
                message = `Luar biasa! Anda mendapat ${score}/${quizData.length} (${percentage}%) - Pemahaman Anda tentang energi sangat baik! ğŸŒŸ`;
            } else if (percentage >= 60) {
                message = `Bagus! Anda mendapat ${score}/${quizData.length} (${percentage}%) - Terus belajar untuk hasil yang lebih baik! ğŸ‘`;
            } else {
                message = `Anda mendapat ${score}/${quizData.length} (${percentage}%) - Jangan menyerah, baca materi lagi dan coba lagi! ğŸ’ª`;
            }
            
            document.getElementById('final-student-name').textContent = studentName;
            document.getElementById('score-text').textContent = message;
            playCompletionSound(); // Mainkan suara fanfare saat kuis selesai
        }

        function resetQuiz() {
            currentQuestion = 0;
            score = 0;
            answered = false;
            
            document.getElementById('quiz-container').classList.remove('hidden');
            document.getElementById('final-score').classList.add('hidden');
            document.getElementById('question-container').classList.remove('hidden');
            document.getElementById('result-container').classList.add('hidden');
            document.getElementById('next-btn').textContent = 'Soal Berikutnya';
            
            displayQuestion();
        }

        function restartQuiz() {
            showNameInput();
            playQuizStartSound();
        }

        function updateProgress() {
            const progress = (currentQuestion / quizData.length) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
            document.getElementById('progress-text').textContent = currentQuestion + '/' + quizData.length;
        }

        // Modal Functions
        function showEnergyExamples(energyType) {
            const modal = document.getElementById('image-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalExamples = document.getElementById('modal-examples');
            
            const energyData = energyExamples[energyType];
            if (!energyData) return;
            
            modalTitle.textContent = energyData.title;
            modalExamples.innerHTML = '';
            
            energyData.examples.forEach(example => {
                const exampleDiv = document.createElement('div');
                exampleDiv.className = 'example-item';
                exampleDiv.innerHTML = `
                    ${example.svg}
                    <h4 style="font-weight: bold; color: #333; margin-top: 0.5rem;">${example.name}</h4>
                `;
                modalExamples.appendChild(exampleDiv);
            });
            
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal() {
            const modal = document.getElementById('image-modal');
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }
        
        // Close modal when clicking outside
        document.getElementById('image-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        
        // Certificate Functions
        function generateCertificate() {
            const percentage = Math.round((score / quizData.length) * 100);
            const currentDate = new Date().toLocaleDateString('id-ID', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            document.getElementById('cert-student-name').textContent = studentName;
            document.getElementById('cert-score').textContent = `${score}/${quizData.length} (${percentage}%)`;
            document.getElementById('cert-date').textContent = `${currentDate}`;
        }

        function saveAsImage() {
            generateCertificate();
            
            const certificate = document.getElementById('certificate-template');
            certificate.style.display = 'block';
            
            // Use html2canvas library (we'll implement a simple version)
            html2canvas(certificate, {
                width: 800,
                height: 600,
                backgroundColor: null,
                scale: 2
            }).then(canvas => {
                certificate.style.display = 'none';
                
                // Create download link
                const link = document.createElement('a');
                link.download = `Sertifikat_${studentName.replace(/\s+/g, '_')}_Kuis_Energi.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            }).catch(error => {
                certificate.style.display = 'none';
                showMessage('Maaf, terjadi kesalahan saat menyimpan gambar. Silakan coba lagi.', 'error');
            });
        }

        function saveAsPDF() {
            generateCertificate();
            
            const certificate = document.getElementById('certificate-template');
            certificate.style.display = 'block';
            
            // Use jsPDF with html2canvas
            html2canvas(certificate, {
                width: 800,
                height: 600,
                backgroundColor: null,
                scale: 2
            }).then(canvas => {
                certificate.style.display = 'none';
                
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF({
                    orientation: 'landscape',
                    unit: 'px',
                    format: [800, 600]
                });
                
                const imgData = canvas.toDataURL('image/png');
                pdf.addImage(imgData, 'PNG', 0, 0, 800, 600);
                pdf.save(`Sertifikat_${studentName.replace(/\s+/g, '_')}_Kuis_Energi.pdf`);
            }).catch(error => {
                certificate.style.display = 'none';
                showMessage('Maaf, terjadi kesalahan saat menyimpan PDF. Silakan coba lagi.', 'error');
            });
        }

        // Simple implementation without external libraries
        function saveAsImageSimple() {
            generateCertificate();
            
            const certificate = document.getElementById('certificate-template');
            certificate.style.display = 'block';
            
            // Create a canvas and draw the certificate
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 800;
            canvas.height = 600;
            
            // Create gradient background
            const gradient = ctx.createLinearGradient(0, 0, 800, 600);
            gradient.addColorStop(0, '#667eea');
            gradient.addColorStop(1, '#764ba2');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 800, 600);
            
            // Add border
            ctx.strokeStyle = 'rgba(255,255,255,0.3)';
            ctx.lineWidth = 6;
            ctx.strokeRect(40, 40, 720, 520);
            
            // Add inner border
            ctx.strokeStyle = 'rgba(255,255,255,0.1)';
            ctx.lineWidth = 2;
            ctx.strokeRect(60, 60, 680, 480);
            
            // Add text
            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';
            
            // Title
            ctx.font = 'bold 40px Arial';
            ctx.fillText('ğŸ† SERTIFIKAT', 400, 150);
            
            ctx.font = '28px Arial';
            ctx.fillText('Kuis Interaktif Energi', 400, 190);
            
            // Student name
            ctx.font = '20px Arial';
            ctx.fillText('Diberikan kepada:', 400, 250);
            
            ctx.font = 'bold 32px Arial';
            ctx.fillStyle = '#FFD700';
            ctx.fillText(studentName, 400, 300);
            
            // Score
            ctx.fillStyle = 'white';
            ctx.font = '18px Arial';
            ctx.fillText('Telah menyelesaikan kuis dengan skor:', 400, 350);
            
            const percentage = Math.round((score / quizData.length) * 100);
            ctx.font = 'bold 36px Arial';
            ctx.fillStyle = '#FFD700';
            ctx.fillText(`${score}/${quizData.length} (${percentage}%)`, 400, 400);
            
            // Date
            ctx.fillStyle = 'white';
            ctx.font = '16px Arial';
            const currentDate = new Date().toLocaleDateString('id-ID');
            ctx.fillText(currentDate, 400, 450);
            
            // Signature lines
            ctx.strokeStyle = 'rgba(255,255,255,0.5)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(150, 520);
            ctx.lineTo(300, 520);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(500, 520);
            ctx.lineTo(650, 520);
            ctx.stroke();
            
            ctx.font = '14px Arial';
            ctx.fillStyle = 'rgba(255,255,255,0.8)';
            ctx.fillText('Media Pembelajaran', 225, 540);
            ctx.fillText('Energi', 575, 540);
            
            certificate.style.display = 'none';
            
            // Download the image
            const link = document.createElement('a');
            link.download = `Sertifikat_${studentName.replace(/\s+/g, '_')}_Kuis_Energi.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
            
            showMessage('Sertifikat berhasil disimpan sebagai gambar! ğŸ–¼ï¸', 'success');
        }

        function saveAsPDFSimple() {
            // For PDF, we'll create a simple text-based version
            const percentage = Math.round((score / quizData.length) * 100);
            const currentDate = new Date().toLocaleDateString('id-ID');
            
            const pdfContent = `
SERTIFIKAT KUIS INTERAKTIF ENERGI

Diberikan kepada: ${studentName}

Telah menyelesaikan kuis dengan skor:
${score}/${quizData.length} (${percentage}%)

Tanggal: ${currentDate}

Media Pembelajaran Energi
            `;
            
            const blob = new Blob([pdfContent], { type: 'text/plain' });
            const link = document.createElement('a');
            link.download = `Sertifikat_${studentName.replace(/\s+/g, '_')}_Kuis_Energi.txt`;
            link.href = URL.createObjectURL(blob);
            link.click();
            
            showMessage('Sertifikat berhasil disimpan sebagai file teks! ğŸ“„', 'success');
        }

        function showMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: bold;
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
                ${type === 'success' ? 'background: #10b981;' : 'background: #ef4444;'}
            `;
            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }

        // Add click listeners to energy cards
        document.addEventListener('DOMContentLoaded', function() {
            const energyCards = document.querySelectorAll('.energy-card');
            energyCards.forEach(card => {
                card.addEventListener('click', function() {
                    const energyType = this.getAttribute('data-energy');
                    showEnergyExamples(energyType);
                });
            });
        });

        // Event Listeners
        document.getElementById('next-btn').addEventListener('click', nextQuestion);
        document.getElementById('restart-btn').addEventListener('click', restartQuiz);
        
        // Name input event listeners
        document.getElementById('start-quiz-btn').addEventListener('click', startQuizWithName);
        document.getElementById('student-name').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startQuizWithName();
            }
            // Reset border color when typing
            this.style.borderColor = '#d1d5db';
        });
        
        // Certificate save event listeners
        document.getElementById('save-image-btn').addEventListener('click', saveAsImageSimple);
        document.getElementById('save-pdf-btn').addEventListener('click', saveAsPDFSimple);

        // Element SDK Implementation
        async function onConfigChange(config) {
            const mainTitle = config.main_title || defaultConfig.main_title;
            const quizTitle = config.quiz_title || defaultConfig.quiz_title;
            
            document.getElementById('main-title').textContent = mainTitle;
            document.getElementById('quiz-title').textContent = quizTitle;
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ["main_title", config.main_title || defaultConfig.main_title],
                ["quiz_title", config.quiz_title || defaultConfig.quiz_title]
            ]);
        }

        // Initialize
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities,
                mapToEditPanelValues
            });
        }

        // Initialize quiz
        displayQuestion();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9957becef1b4cf0c',t:'MTc2MTYyNjMyNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>